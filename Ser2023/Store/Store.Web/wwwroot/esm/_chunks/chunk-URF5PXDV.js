import{a as r,b as Dr,c as o,d as m,e as S,f as c,g as l}from"./chunk-FEDAVPE7.js";var pt=Dr((Is,wt)=>{wt.exports=Serenity.Extensions});var Ve=class{};r(Ve,"CategoriesColumns"),Ve.columnsKey="Store.Categories";var vt=o(l(),1);var Be=o(l(),1),xt=o(c(),1);var Te=class extends Be.PrefixedContext{constructor(n){if(super(n),!Te.init){Te.init=!0;var e=Be.ImageUploadEditor;(0,xt.initFormType)(Te,["FileName",e])}}},We=Te;r(We,"CategoriesExcelImportForm"),We.formKey="Store.CategoriesExcelImport";var ne=o(l(),1),Rt=o(c(),1);var Ue=class extends ne.PrefixedContext{constructor(n){if(super(n),!Ue.init){Ue.init=!0;var e=ne.LookupEditor,t=ne.StringEditor;(0,Rt.initFormType)(Ue,["CategoryTypeId",e,"CategoryCode",e,"CategoryName",t,"Description",t,"Picture",t])}}},z=Ue;r(z,"CategoriesForm"),z.formKey="Store.Categories";var Pt=o(c(),1);var N=class{};r(N,"CategoriesLangRow"),N.idProperty="Id",N.nameProperty="CategoryName",N.localTextPrefix="Store.CategoriesLang",N.deletePermission="Store:General",N.insertPermission="Store:General",N.readPermission="Store:General",N.updatePermission="Store:General",N.Fields=(0,Pt.fieldsProxy)();var Dt=o(c(),1),Ct;(e=>(e.baseUrl="Store/CategoriesLang",e.Methods={Create:"Store/CategoriesLang/Create",Update:"Store/CategoriesLang/Update",Delete:"Store/CategoriesLang/Delete",Retrieve:"Store/CategoriesLang/Retrieve",List:"Store/CategoriesLang/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(i,a,p){return(0,Dt.serviceRequest)(e.baseUrl+"/"+t,i,a,p)}})))(Ct||(Ct={}));var ae=o(c(),1);var f=class{static getLookup(){return(0,ae.getLookup)("Store.Categories")}static getLookupAsync(){return S(this,null,function*(){return(0,ae.getLookupAsync)("Store.Categories")})}};r(f,"CategoriesRow"),f.idProperty="CategoryId",f.isActiveProperty="IsActive",f.nameProperty="CategoryName",f.localTextPrefix="Store.Categories",f.lookupKey="Store.Categories",f.deletePermission="Store:CategoriesType:Delete",f.insertPermission="Store:CategoriesType:Modify",f.readPermission="Store:CategoriesType:View",f.updatePermission="Store:CategoriesType:Modify",f.Fields=(0,ae.fieldsProxy)();var It=o(c(),1),Fe;(e=>(e.baseUrl="Store/Categories",e.Methods={Create:"Store/Categories/Create",Update:"Store/Categories/Update",Delete:"Store/Categories/Delete",Retrieve:"Store/Categories/Retrieve",List:"Store/Categories/List",ExcelImport:"Store/Categories/ExcelImport"},["Create","Update","Delete","Retrieve","List","ExcelImport"].forEach(t=>{e[t]=function(i,a,p){return(0,It.serviceRequest)(e.baseUrl+"/"+t,i,a,p)}})))(Fe||(Fe={}));var Ge=class{};r(Ge,"CategoriesTypeColumns"),Ge.columnsKey="Store.CategoriesType";var pe=o(l(),1),bt=o(c(),1);var he=class extends pe.PrefixedContext{constructor(n){if(super(n),!he.init){he.init=!0;var e=pe.IntegerEditor,t=pe.StringEditor;(0,bt.initFormType)(he,["Type",e,"CategoryType",t])}}},j=he;r(j,"CategoriesTypeForm"),j.formKey="Store.CategoriesType";var ce=o(c(),1);var v=class{static getLookup(){return(0,ce.getLookup)("Store.CategoriesType")}static getLookupAsync(){return S(this,null,function*(){return(0,ce.getLookupAsync)("Store.CategoriesType")})}};r(v,"CategoriesTypeRow"),v.idProperty="CategoryTypeId",v.isActiveProperty="IsActive",v.nameProperty="Type",v.localTextPrefix="Store.CategoriesType",v.lookupKey="Store.CategoriesType",v.deletePermission="Store:CategoriesType:Delete",v.insertPermission="Store:CategoriesType:Modify",v.readPermission="Store:CategoriesType:View",v.updatePermission="Store:CategoriesType:Modify",v.Fields=(0,ce.fieldsProxy)();var Lt=o(c(),1),Ke;(e=>(e.baseUrl="Store/CategoriesType",e.Methods={Create:"Store/CategoriesType/Create",Update:"Store/CategoriesType/Update",Delete:"Store/CategoriesType/Delete",Retrieve:"Store/CategoriesType/Retrieve",List:"Store/CategoriesType/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(i,a,p){return(0,Lt.serviceRequest)(e.baseUrl+"/"+t,i,a,p)}})))(Ke||(Ke={}));var qt=o(l(),1);var de=class{format(n){var e=n.value;if(!e||!e.length)return"";var t=D.getLookup().itemById;let i;return e.map(a=>(i=t[a])?i.FullName:a).join(", ")}};r(de,"EmployeeListFormatter"),de=m([qt.Decorators.registerFormatter("Store.Store.EmployeeListFormatter")],de);var $e=class{};r($e,"CounterpartiesColumns"),$e.columnsKey="Store.Counterparties";var k=o(l(),1);var Y=o(l(),1),y=o(c(),1);var C=class extends Y.StringEditor{constructor(e){super(e);this.addValidationRule(this.uniqueName,t=>{var i=(0,y.trimToNull)(this.get_value());return i==null?null:C.validate(i,this.multiple)}),e.bind("change",t=>{Y.WX.hasOriginalEvent(t)&&this.formatValue()}),e.bind("blur",t=>{this.element.hasClass("valid")&&this.formatValue()})}formatValue(){this.element.val(this.getFormattedValue())}getFormattedValue(){var e=this.element.val();return this.multiple?C.formatMulti(e,C.formatPhone):C.formatPhone(e)}get_value(){return this.getFormattedValue()}set_value(e){this.element.val(e)}static validate(e,t){var i=t?C.isValidMulti(e,C.isValidPhone):C.isValidPhone(e);return i?null:(0,y.localText)(t?"Validation.StorePhoneMultiple":"Validation.StorePhone")}static isValidPhone(e){if((0,y.isEmptyOrNull)(e)||(e=(0,y.replaceAll)((0,y.replaceAll)(e," ",""),"-",""),e.length<10)||((0,y.startsWith)(e,"0")&&(e=e.substring(1)),(0,y.startsWith)(e,"(")&&e.charAt(4)===")"&&(e=e.substr(1,3)+e.substring(5)),e.length!==12)||(0,y.startsWith)(e,"0"))return!1;for(var t=0;t<e.length;t++){var i=e.charAt(t);if(i<"0"||i>"9")return!1}return!0}static formatPhone(e){return C.isValidPhone(e)&&(e=(0,y.replaceAll)((0,y.replaceAll)((0,y.replaceAll)((0,y.replaceAll)(e," ",""),"-",""),"(",""),")",""),(0,y.startsWith)(e,"0")&&(e=e.substring(1)),e="("+e.substr(0,3)+") "+e.substr(3,3)+"-"+e.substr(6,2)+e.substr(8,2)+e.substr(10,2)),e}static formatMulti(e,t){var i=(0,y.replaceAll)(e,String.fromCharCode(59),String.fromCharCode(44)).split(String.fromCharCode(44)),a="";for(var p of i){var P=(0,y.trimToNull)(p);P!=null&&(a.length>0&&(a+=", "),a+=t(P))}return a}static isValidMulti(e,t){if((0,y.isEmptyOrNull)(e))return!1;for(var i=(0,y.replaceAll)(e,String.fromCharCode(59),String.fromCharCode(44)).split(String.fromCharCode(44)),a=!1,p=0;p<i.length;p++){var P=i[p],X=(0,y.trimToNull)(P);if(X!=null){if(!t(X))return!1;a=!0}}return!!a}};r(C,"PhoneEditor"),m([Y.Decorators.option()],C.prototype,"multiple",2),C=m([Y.Decorators.registerEditor("Store.Store.PhoneEditor")],C);var Q=o(l(),1),I=o(c(),1);var ue=o(l(),1),gt=o(c(),1);var K=class extends ue.TemplatedDialog{constructor(){super();this.textEditor=new ue.HtmlNoteContentEditor(this.byId("Text"))}getTemplate(){return"<form id='~_Form' class='s-Form'><textarea id='~_Text' class='required'></textarea></form>"}getDialogButtons(){return[{text:(0,gt.localText)("Dialogs.OkButton"),click:()=>{this.validateForm()&&this.okClick&&this.okClick()}},{text:(0,gt.localText)("Dialogs.CancelButton"),click:()=>this.dialogClose()}]}get text(){return this.textEditor.value}set text(e){this.textEditor.value=e}};r(K,"NotesDialog"),K=m([ue.Decorators.registerClass("Store.Store.NotesDialog")],K);var Z=class extends Q.TemplatedWidget{constructor(e){super(e);new Q.Toolbar(this.byId("Toolbar"),{buttons:[{title:"Add Note",cssClass:"add-button",onClick:t=>{t.preventDefault(),this.addClick()}}]})}getTemplate(){return"<div><div id='~_Toolbar'></div><ul id='~_NoteList'></ul></div>"}updateContent(){var e=this.byId("NoteList");if(e.children().remove(),this.items)for(var t=0,i=0;i<this.items.length;i++){var a=this.items[i],p=$("<li/>");$("<div/>").addClass("note-text").html((0,I.coalesce)(a.Text,"")).appendTo(p),$("<a/>").attr("href","#").addClass("note-date").text(a.InsertUserDisplayName+" - "+(0,I.formatDate)(a.InsertDate,"g")).data("index",t).appendTo(p).click(P=>this.editClick(P)),$("<a/>").attr("href","#").addClass("note-delete").attr("title","delete note").data("index",t).appendTo(p).click(P=>this.deleteClick(P)),p.appendTo(e),t++}}addClick(){var e=new K;e.dialogTitle="Add Note",e.okClick=()=>{var t=(0,I.trimToNull)(e.text);t!=null&&(this.items=this.items||[],(0,I.insert)(this.items,0,{Text:t,InsertUserDisplayName:I.Authorization.userDefinition.DisplayName,InsertDate:(0,I.formatISODateTimeUTC)(new Date)}),this.updateContent(),e.dialogClose(),this.set_isDirty(!0),this.onChange&&this.onChange())},e.dialogOpen()}editClick(e){e.preventDefault();var t=$(e.target).data("index"),i=this.items[t],a=new K;a.dialogTitle="Edit Note",a.text=i.Text,a.okClick=()=>{var p=(0,I.trimToNull)(a.text);p&&(this.items[t].Text=p,this.updateContent(),a.dialogClose(),this.set_isDirty(!0),this.onChange&&this.onChange())},a.dialogOpen()}deleteClick(e){e.preventDefault();var t=$(e.target).data("index");(0,I.confirmDialog)("Delete this note?",()=>{this.items.splice(t,1),this.updateContent(),this.set_isDirty(!0),this.onChange&&this.onChange()})}get value(){return this.items}set value(e){this.items=e||[],this.set_isDirty(!1),this.updateContent()}getEditValue(e,t){t[e.name]=this.value}setEditValue(e,t){this.value=e[t.name]||[]}get_isDirty(){return this.isDirty}set_isDirty(e){this.isDirty=e}};r(Z,"NotesEditor"),Z=m([Q.Decorators.registerEditor("Store.Store.NotesEditor",[Q.IGetEditValue,Q.ISetEditValue]),Q.Decorators.element("<div/>")],Z);var Tt=o(c(),1);var Ee=class extends k.PrefixedContext{constructor(n){if(super(n),!Ee.init){Ee.init=!0;var e=k.StringEditor,t=k.LookupEditor,i=C,a=Z,p=k.DateEditor,P=k.EmailEditor,X=k.BooleanEditor;(0,Tt.initFormType)(Ee,["CounterpartyId",e,"CompanyName",e,"ContactName",e,"ContactTitle",e,"Representatives",t,"Address",e,"Country",t,"City",t,"Region",e,"PostalCode",e,"Phone",i,"NotesList",a,"LastContactDate",p,"LastContactedBy",t,"Email",P,"SendBulletin",X])}}},_=Ee;r(_,"CounterpartiesForm"),_.formKey="Store.Counterparties";var le=o(c(),1);var g=class{static getLookup(){return(0,le.getLookup)("Store.Counterparties")}static getLookupAsync(){return S(this,null,function*(){return(0,le.getLookupAsync)("Store.Counterparties")})}};r(g,"CounterpartiesRow"),g.idProperty="Id",g.isActiveProperty="IsActive",g.nameProperty="CounterpartyId",g.localTextPrefix="Store.Counterparties",g.lookupKey="Store.Counterparties",g.deletePermission="Store:Counterparties:Delete",g.insertPermission="Store:Counterparties:Modify",g.readPermission="Store:Counterparties:View",g.updatePermission="Store:Counterparties:Modify",g.Fields=(0,le.fieldsProxy)();var Ut=o(c(),1),ze;(e=>(e.baseUrl="Store/Counterparties",e.Methods={Create:"Store/Counterparties/Create",Update:"Store/Counterparties/Update",Delete:"Store/Counterparties/Delete",Retrieve:"Store/Counterparties/Retrieve",List:"Store/Counterparties/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(i,a,p){return(0,Ut.serviceRequest)(e.baseUrl+"/"+t,i,a,p)}})))(ze||(ze={}));var ht=o(c(),1);var H=class{};r(H,"CounterpartyDetailsRow"),H.idProperty="Id",H.nameProperty="Email",H.localTextPrefix="Store.CounterpartyDetails",H.deletePermission="Store:Counterparties:Delete",H.insertPermission="Store:Counterparties:Modify",H.readPermission="Store:Counterparties:View",H.updatePermission="Store:Counterparties:Modify",H.Fields=(0,ht.fieldsProxy)();var Et=o(c(),1);var V=class{};r(V,"CounterpartyRepresentativesRow"),V.idProperty="RepresentativeId",V.localTextPrefix="Store.CounterpartyRepresentatives",V.deletePermission="Store:Counterparties:Delete",V.insertPermission="Store:Counterparties:Modify",V.readPermission="Store:Counterparties:View",V.updatePermission="Store:Counterparties:Modify",V.Fields=(0,Et.fieldsProxy)();var je=class{};r(je,"DocumentTypeColumns"),je.columnsKey="Store.DocumentType";var Ze=o(l(),1),Ot=o(c(),1);var Oe=class extends Ze.PrefixedContext{constructor(n){if(super(n),!Oe.init){Oe.init=!0;var e=Ze.StringEditor;(0,Ot.initFormType)(Oe,["DocumentName",e])}}},Ye=Oe;r(Ye,"DocumentTypeForm"),Ye.formKey="Store.DocumentType";var me=o(c(),1);var T=class{static getLookup(){return(0,me.getLookup)("Store.DocumentType")}static getLookupAsync(){return S(this,null,function*(){return(0,me.getLookupAsync)("Store.DocumentType")})}};r(T,"DocumentTypeRow"),T.idProperty="DocumentTypeId",T.isActiveProperty="IsActive",T.nameProperty="DocumentName",T.localTextPrefix="Store.DocumentType",T.lookupKey="Store.DocumentType",T.deletePermission="Store:DocumentType:Delete",T.insertPermission="Store:DocumentType:Modify",T.readPermission="Store:DocumentType:View",T.updatePermission="Store:DocumentType:Modify",T.Fields=(0,me.fieldsProxy)();var Nt=o(c(),1),kt;(e=>(e.baseUrl="Store/DocumentType",e.Methods={Create:"Store/DocumentType/Create",Update:"Store/DocumentType/Update",Delete:"Store/DocumentType/Delete",Retrieve:"Store/DocumentType/Retrieve",List:"Store/DocumentType/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(i,a,p){return(0,Nt.serviceRequest)(e.baseUrl+"/"+t,i,a,p)}})))(kt||(kt={}));var ye=o(c(),1);var D=class{static getLookup(){return(0,ye.getLookup)("Store.Employees")}static getLookupAsync(){return S(this,null,function*(){return(0,ye.getLookupAsync)("Store.Employees")})}};r(D,"EmployeesRow"),D.idProperty="EmployeeId",D.isActiveProperty="IsActive",D.nameProperty="LastName",D.localTextPrefix="Store.Employees",D.lookupKey="Store.Employees",D.deletePermission="Store:General",D.insertPermission="Store:General",D.readPermission="Store:General",D.updatePermission="Store:General",D.Fields=(0,ye.fieldsProxy)();var Qt=o(l(),1),Ht=(e=>(e[e.Male=1]="Male",e[e.Female=2]="Female",e))(Ht||{});Qt.Decorators.registerEnumType(Ht,"Store.Store.Gender","Store.Store.Entities.Gender");var _e=class{};r(_e,"MeasuresColumns"),_e.columnsKey="Store.Measures";var we=o(l(),1),Mt=o(c(),1);var ke=class extends we.PrefixedContext{constructor(n){if(super(n),!ke.init){ke.init=!0;var e=we.StringEditor;(0,Mt.initFormType)(ke,["MeasureName",e])}}},w=ke;r(w,"MeasuresForm"),w.formKey="Store.Measures";var Se=o(c(),1);var x=class{static getLookup(){return(0,Se.getLookup)("Store.Measures")}static getLookupAsync(){return S(this,null,function*(){return(0,Se.getLookupAsync)("Store.Measures")})}};r(x,"MeasuresRow"),x.idProperty="MeasureId",x.isActiveProperty="IsActive",x.nameProperty="MeasureName",x.localTextPrefix="Store.Measures",x.lookupKey="Store.Measures",x.deletePermission="Store:Measures:Delete",x.insertPermission="Store:Measures:Modify",x.readPermission="Store:Measures:View",x.updatePermission="Store:Measures:Modify",x.Fields=(0,Se.fieldsProxy)();var At=o(c(),1),et;(e=>(e.baseUrl="Store/Measures",e.Methods={Create:"Store/Measures/Create",Update:"Store/Measures/Update",Delete:"Store/Measures/Delete",Retrieve:"Store/Measures/Retrieve",List:"Store/Measures/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(i,a,p){return(0,At.serviceRequest)(e.baseUrl+"/"+t,i,a,p)}})))(et||(et={}));var Jt=o(c(),1);var M=class{};r(M,"NotesRow"),M.idProperty="NoteId",M.nameProperty="EntityType",M.localTextPrefix="Store.Notes",M.deletePermission="Store:General",M.insertPermission="Store:General",M.readPermission="Store:General",M.updatePermission="Store:General",M.Fields=(0,Jt.fieldsProxy)();var Vt=o(c(),1),Xt;(e=>(e.baseUrl="Store/Notes",e.Methods={Create:"Store/Notes/Create",Update:"Store/Notes/Update",Delete:"Store/Notes/Delete",Retrieve:"Store/Notes/Retrieve",List:"Store/Notes/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(i,a,p){return(0,Vt.serviceRequest)(e.baseUrl+"/"+t,i,a,p)}})))(Xt||(Xt={}));var tt=class{};r(tt,"OperationTypeColumns"),tt.columnsKey="Store.OperationType";var fe=o(l(),1),Wt=o(c(),1);var Ne=class extends fe.PrefixedContext{constructor(n){if(super(n),!Ne.init){Ne.init=!0;var e=fe.IntegerEditor,t=fe.StringEditor;(0,Wt.initFormType)(Ne,["OpCode",e,"Operation",t])}}},rt=Ne;r(rt,"OperationTypeForm"),rt.formKey="Store.OperationType";var ve=o(c(),1);var U=class{static getLookup(){return(0,ve.getLookup)("Store.OperationType")}static getLookupAsync(){return S(this,null,function*(){return(0,ve.getLookupAsync)("Store.OperationType")})}};r(U,"OperationTypeRow"),U.idProperty="OperationTypeId",U.isActiveProperty="IsActive",U.nameProperty="Operation",U.localTextPrefix="Store.OperationType",U.lookupKey="Store.OperationType",U.deletePermission="Store:OperationType:Delete",U.insertPermission="Store:OperationType:Modify",U.readPermission="Store:OperationType:View",U.updatePermission="Store:OperationType:Modify",U.Fields=(0,ve.fieldsProxy)();var Ft=o(c(),1),Bt;(e=>(e.baseUrl="Store/OperationType",e.Methods={Create:"Store/OperationType/Create",Update:"Store/OperationType/Update",Delete:"Store/OperationType/Delete",Retrieve:"Store/OperationType/Retrieve",List:"Store/OperationType/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(i,a,p){return(0,Ft.serviceRequest)(e.baseUrl+"/"+t,i,a,p)}})))(Bt||(Bt={}));var Gt;(R=>{R.General="Store:General";let n;(d=>(d.Delete="Store:Categories:Delete",d.Modify="Store:Categories:Modify",d.View="Store:Categories:View"))(n=R.Categories||(R.Categories={}));let e;(d=>(d.Delete="Store:CategoriesType:Delete",d.Modify="Store:CategoriesType:Modify",d.View="Store:CategoriesType:View"))(e=R.CategoriesType||(R.CategoriesType={}));let t;(d=>(d.Delete="Store:Shops:Delete",d.Modify="Store:Shops:Modify",d.View="Store:Shops:View"))(t=R.Shops||(R.Shops={}));let i;(d=>(d.Delete="Store:DocumentType:Delete",d.Modify="Store:DocumentType:Modify",d.View="Store:DocumentType:View"))(i=R.DocumentType||(R.DocumentType={}));let a;(d=>(d.Delete="Store:Measures:Delete",d.Modify="Store:Measures:Modify",d.View="Store:Measures:View"))(a=R.Measures||(R.Measures={}));let p;(d=>(d.Delete="Store:OperationType:Delete",d.Modify="Store:OperationType:Modify",d.View="Store:OperationType:View"))(p=R.OperationType||(R.OperationType={}));let P;(d=>(d.Delete="Store:Counterparties:Delete",d.Modify="Store:Counterparties:Modify",d.View="Store:Counterparties:View"))(P=R.Counterparties||(R.Counterparties={}));let X;(d=>(d.Delete="Store:Wares:Delete",d.Modify="Store:Wares:Modify",d.View="Store:Wares:View"))(X=R.Wares||(R.Wares={}));let Cr;(d=>(d.Delete="Store:Product:Delete",d.Modify="Store:Product:Modify",d.View="Store:Product:View"))(Cr=R.Product||(R.Product={}))})(Gt||(Gt={}));var ge=class{};r(ge,"ProductDetailsColumns"),ge.columnsKey="Store.ProductDetails";var ot=o(l(),1);var xe=class extends ot.EntityDialog{constructor(){super(...arguments);this.form=new ee(this.idPrefix)}getFormKey(){return ee.formKey}getIdProperty(){return u.idProperty}getLocalTextPrefix(){return u.localTextPrefix}getNameProperty(){return u.nameProperty}getService(){return st.baseUrl}getDeletePermission(){return u.deletePermission}getInsertPermission(){return u.insertPermission}getUpdatePermission(){return u.updatePermission}};r(xe,"WaresDialog"),xe=m([ot.Decorators.registerClass("Store.Store.WaresDialog")],xe);var Re=o(l(),1),Kt=o(c(),1);var Qe=class extends Re.PrefixedContext{constructor(n){if(super(n),!Qe.init){Qe.init=!0;var e=Re.LookupEditor,t=Re.DecimalEditor;(0,Kt.initFormType)(Qe,["WaresId",e,"Quantity",t,"ProductQuantity",t,"PlanPrice",t,"Discount",t])}}},te=Qe;r(te,"ProductDetailsForm"),te.formKey="Store.ProductDetails";var $t=o(c(),1);var b=class{};r(b,"ProductDetailsRow"),b.idProperty="DetailId",b.isActiveProperty="IsActive",b.localTextPrefix="Store.ProductDetails",b.deletePermission="Store:Product:Delete",b.insertPermission="Store:Product:View",b.readPermission="Store:Product:View",b.updatePermission="Store:Product:View",b.Fields=(0,$t.fieldsProxy)();var jt=o(c(),1),zt;(e=>(e.baseUrl="Store/ProductDetails",e.Methods={Retrieve:"Store/ProductDetails/Retrieve",List:"Store/ProductDetails/List"},["Retrieve","List"].forEach(t=>{e[t]=function(i,a,p){return(0,jt.serviceRequest)(e.baseUrl+"/"+t,i,a,p)}})))(zt||(zt={}));var Yt=o(c(),1);var A=class{};r(A,"ProductLangRow"),A.idProperty="Id",A.nameProperty="ProductName",A.localTextPrefix="Store.ProductLang",A.deletePermission="Store:General",A.insertPermission="Store:General",A.readPermission="Store:General",A.updatePermission="Store:General",A.Fields=(0,Yt.fieldsProxy)();var _t=o(c(),1),Zt;(e=>(e.baseUrl="Store/ProductLang",e.Methods={Create:"Store/ProductLang/Create",Update:"Store/ProductLang/Update",Delete:"Store/ProductLang/Delete",Retrieve:"Store/ProductLang/Retrieve",List:"Store/ProductLang/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(i,a,p){return(0,_t.serviceRequest)(e.baseUrl+"/"+t,i,a,p)}})))(Zt||(Zt={}));var it=class{};r(it,"ProductsColumns"),it.columnsKey="Store.Products";var nt=o(l(),1);var re=class extends nt.EntityDialog{constructor(){super(...arguments);this.form=new z(this.idPrefix)}getFormKey(){return z.formKey}getIdProperty(){return f.idProperty}getLocalTextPrefix(){return f.localTextPrefix}getNameProperty(){return f.nameProperty}getService(){return Fe.baseUrl}getDeletePermission(){return f.deletePermission}getInsertPermission(){return f.insertPermission}getUpdatePermission(){return f.updatePermission}};r(re,"CategoriesDialog"),re=m([nt.Decorators.registerClass("Store.Store.CategoriesDialog")],re);var L=o(l(),1);var at=o(l(),1);var Pe=class extends at.EntityDialog{constructor(){super(...arguments);this.form=new w(this.idPrefix)}getFormKey(){return w.formKey}getIdProperty(){return x.idProperty}getLocalTextPrefix(){return x.localTextPrefix}getNameProperty(){return x.nameProperty}getService(){return et.baseUrl}getDeletePermission(){return x.deletePermission}getInsertPermission(){return x.insertPermission}getUpdatePermission(){return x.updatePermission}};r(Pe,"MeasuresDialog"),Pe=m([at.Decorators.registerClass("Store.Store.MeasuresDialog")],Pe);var or=o(l(),1),Ce=o(c(),1),sr=o(pt(),1);var er=o(l(),1),tr=o(c(),1),rr=o(pt(),1);var oe=class extends rr.GridEditorDialog{constructor(){super();this.form=new te(this.idPrefix),this.form.WaresId.changeSelect2(e=>{var t=(0,tr.toId)(this.form.WaresId.value);t!=null&&(this.form.PlanPrice.value=u.getLookup().itemById[t].UnitPrice)}),this.form.Discount.addValidationRule(this.uniqueName,e=>{var t=this.form.PlanPrice.value,i=this.form.Quantity.value,a=this.form.ProductQuantity.value,p=this.form.Discount.value;if(t!=null&&i!=null&&a!=null&&p!=null&&p>0&&p>=t*i/a)return"Discount can't be higher than total price!"})}getFormKey(){return te.formKey}getLocalTextPrefix(){return b.localTextPrefix}updateInterface(){super.updateInterface()}};r(oe,"ProductDetailsDialog"),oe=m([er.Decorators.registerClass()],oe);var se=class extends sr.GridEditorBase{getColumnsKey(){return ge.columnsKey}getDialogType(){return oe}getLocalTextPrefix(){return b.localTextPrefix}constructor(n){super(n)}getLookupKey(){return u.lookupKey}validateEntity(n,e){n.WaresId=(0,Ce.toId)(n.WaresId);var t=(0,Ce.tryFirst)(this.view.getItems(),i=>i.WaresId===n.WaresId);return t&&this.id(t)!==e?((0,Ce.alertDialog)("This wares is already in order details!"),!1):(n.WaresName=u.getLookup().itemById[n.WaresId].WaresName,n.LineTotal=(n.Quantity||0)*(n.UnitPrice||0)-(n.Discount||0),!0)}};r(se,"ProductDetailsEditor"),se=m([or.Decorators.registerEditor("Store.Store.ProductDetailsEditor")],se);var ir=o(c(),1);var He=class extends L.PrefixedContext{constructor(n){if(super(n),!He.init){He.init=!0;var e=L.LookupEditor,t=L.StringEditor,i=L.ImageUploadEditor,a=L.BooleanEditor,p=L.DecimalEditor,P=se,X=L.IntegerEditor;(0,ir.initFormType)(He,["CategoryId",e,"ProductName",t,"ProductCode",t,"ProductBarcode",t,"ProductLabel",t,"MeasureId",e,"ProductImage",i,"Discontinued",a,"UnitPrice",p,"QuantityPerUnit",t,"DetailList",P,"UnitsInStock",X,"UnitsOnOrder",X,"ReorderLevel",X])}}},ct=He;r(ct,"ProductsForm"),ct.formKey="Store.Products";var nr=o(c(),1);var W=class{};r(W,"ProductsLogRow"),W.idProperty="ProductLogId",W.localTextPrefix="Store.ProductsLog",W.deletePermission=null,W.insertPermission=null,W.readPermission="",W.updatePermission=null,W.Fields=(0,nr.fieldsProxy)();var De=o(c(),1);var h=class{static getLookup(){return(0,De.getLookup)("Store.Product")}static getLookupAsync(){return S(this,null,function*(){return(0,De.getLookupAsync)("Store.Product")})}};r(h,"ProductsRow"),h.idProperty="ProductId",h.isActiveProperty="IsActive",h.nameProperty="ProductName",h.localTextPrefix="Store.Products",h.lookupKey="Store.Product",h.deletePermission="Store:Product:Delete",h.insertPermission="Store:Product:Modify",h.readPermission="Store:Product:View",h.updatePermission="Store:Product:Modify",h.Fields=(0,De.fieldsProxy)();var pr=o(c(),1),ar;(e=>(e.baseUrl="Store/Products",e.Methods={Create:"Store/Products/Create",Update:"Store/Products/Update",Delete:"Store/Products/Delete",Retrieve:"Store/Products/Retrieve",List:"Store/Products/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(i,a,p){return(0,pr.serviceRequest)(e.baseUrl+"/"+t,i,a,p)}})))(ar||(ar={}));var dt=class{};r(dt,"ShippersColumns"),dt.columnsKey="Store.Shippers";var lt=o(l(),1),cr=o(c(),1);var Me=class extends lt.PrefixedContext{constructor(n){if(super(n),!Me.init){Me.init=!0;var e=lt.StringEditor;(0,cr.initFormType)(Me,["CompanyName",e,"Phone",e])}}},ut=Me;r(ut,"ShippersForm"),ut.formKey="Store.Shippers";var Ie=o(c(),1);var E=class{static getLookup(){return(0,Ie.getLookup)("Store.Shipper")}static getLookupAsync(){return S(this,null,function*(){return(0,Ie.getLookupAsync)("Store.Shipper")})}};r(E,"ShippersRow"),E.idProperty="ShipperId",E.isActiveProperty="IsActive",E.nameProperty="CompanyName",E.localTextPrefix="Store.Shippers",E.lookupKey="Store.Shipper",E.deletePermission="Store:General",E.insertPermission="Store:General",E.readPermission="Store:General",E.updatePermission="Store:General",E.Fields=(0,Ie.fieldsProxy)();var ur=o(c(),1),dr;(e=>(e.baseUrl="Store/Shippers",e.Methods={Create:"Store/Shippers/Create",Update:"Store/Shippers/Update",Delete:"Store/Shippers/Delete",Retrieve:"Store/Shippers/Retrieve",List:"Store/Shippers/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(i,a,p){return(0,ur.serviceRequest)(e.baseUrl+"/"+t,i,a,p)}})))(dr||(dr={}));var mt=class{};r(mt,"ShopsColumns"),mt.columnsKey="Store.Shops";var St=o(l(),1),lr=o(c(),1);var Ae=class extends St.PrefixedContext{constructor(n){if(super(n),!Ae.init){Ae.init=!0;var e=St.StringEditor;(0,lr.initFormType)(Ae,["ShopId",e,"ShopName",e,"ContactName",e,"ContactTitle",e,"Address",e,"City",e,"Region",e,"PostalCode",e,"Country",e,"Phone",e])}}},yt=Ae;r(yt,"ShopsForm"),yt.formKey="Store.Shops";var be=o(c(),1);var O=class{static getLookup(){return(0,be.getLookup)("Store.Shops")}static getLookupAsync(){return S(this,null,function*(){return(0,be.getLookupAsync)("Store.Shops")})}};r(O,"ShopsRow"),O.idProperty="Id",O.isActiveProperty="IsActive",O.nameProperty="ShopId",O.localTextPrefix="Store.Shops",O.lookupKey="Store.Shops",O.deletePermission="Store:Shops:Delete",O.insertPermission="Store:Shops:Modify",O.readPermission="Store:Shops:View",O.updatePermission="Store:Shops:Modify",O.Fields=(0,be.fieldsProxy)();var yr=o(c(),1),mr;(e=>(e.baseUrl="Store/Shops",e.Methods={Create:"Store/Shops/Create",Update:"Store/Shops/Update",Delete:"Store/Shops/Delete",Retrieve:"Store/Shops/Retrieve",List:"Store/Shops/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(i,a,p){return(0,yr.serviceRequest)(e.baseUrl+"/"+t,i,a,p)}})))(mr||(mr={}));var ft=class{};r(ft,"WaresColumns"),ft.columnsKey="Store.Wares";var q=o(l(),1);var Je=o(l(),1),Sr=o(c(),1),fr=o(pt(),1);var Le=class extends Je.EntityDialog{constructor(){super();this.form=new _(this.idPrefix);this.byId("NotesList").closest(".field").hide().end().appendTo(this.byId("TabNotes")),fr.DialogUtils.pendingChangesConfirmation(this.element,()=>this.getSaveState()!=this.loadedState)}getFormKey(){return _.formKey}getIdProperty(){return g.idProperty}getLocalTextPrefix(){return g.localTextPrefix}getNameProperty(){return g.nameProperty}getService(){return ze.baseUrl}getDeletePermission(){return g.deletePermission}getInsertPermission(){return g.insertPermission}getUpdatePermission(){return g.updatePermission}getSaveState(){try{return $.toJSON(this.getSaveEntity())}catch(e){return null}}loadResponse(e){super.loadResponse(e),this.loadedState=this.getSaveState()}loadEntity(e){super.loadEntity(e)}onSaveSuccess(e){super.onSaveSuccess(e),(0,Sr.reloadLookup)("Store.Counterparties")}getTemplate(){return`<div id="~_Tabs" class="s-DialogContent">
    <ul>
        <li><a href="#~_TabInfo"><span>{{text:"Db.Store.Counterparties.EntitySingular"}}</span></a></li>
        <li><a href="#~_TabNotes"><span>{{text:"Db.Store.Notes.EntityPlural"}}</span></a></li>
    </ul>
    <div id="~_TabInfo" class="tab-pane s-TabInfo">
        <div id="~_Toolbar" class="s-DialogToolbar">
        </div>
        <div class="s-Form">
            <form id="~_Form" action="">
                <div class="fieldset ui-widget ui-widget-content ui-corner-all">
                    <div id="~_PropertyGrid"></div>
                    <div class="clear"></div>
                </div>
            </form>
        </div>
    </div>
    <div id="~_TabNotes" class="tab-pane s-TabNotes">
    </div>
</div>`}};r(Le,"CounterpartiesDialog"),Le=m([Je.Decorators.registerClass("Store.Store.CounterpartiesDialog"),Je.Decorators.panel()],Le);var vr=o(c(),1);var Xe=class extends q.PrefixedContext{constructor(n){if(super(n),!Xe.init){Xe.init=!0;var e=q.LookupEditor,t=q.StringEditor,i=q.IntegerEditor,a=q.ImageUploadEditor,p=q.BooleanEditor,P=q.DecimalEditor;(0,vr.initFormType)(Xe,["CategoryId",e,"WaresCode",t,"WaresBarcode",t,"WaresLabel",t,"WaresName",t,"MeasureId",i,"WaresImage",a,"Discontinued",p,"CounterpartyId",e,"QuantityPerUnit",P,"UnitPrice",P,"AccountId",i])}}},ee=Xe;r(ee,"WaresForm"),ee.formKey="Store.Wares";var gr=o(c(),1);var J=class{};r(J,"WaresLangRow"),J.idProperty="Id",J.nameProperty="WaresName",J.localTextPrefix="Store.WaresLang",J.deletePermission="Store:General",J.insertPermission="Store:General",J.readPermission="Store:General",J.updatePermission="Store:General",J.Fields=(0,gr.fieldsProxy)();var Rr=o(c(),1),xr;(e=>(e.baseUrl="Store/WaresLang",e.Methods={Create:"Store/WaresLang/Create",Update:"Store/WaresLang/Update",Delete:"Store/WaresLang/Delete",Retrieve:"Store/WaresLang/Retrieve",List:"Store/WaresLang/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(i,a,p){return(0,Rr.serviceRequest)(e.baseUrl+"/"+t,i,a,p)}})))(xr||(xr={}));var qe=o(c(),1);var u=class{static getLookup(){return(0,qe.getLookup)("Store.Wares")}static getLookupAsync(){return S(this,null,function*(){return(0,qe.getLookupAsync)("Store.Wares")})}};r(u,"WaresRow"),u.idProperty="WaresId",u.isActiveProperty="IsActive",u.nameProperty="WaresName",u.localTextPrefix="Store.Wares",u.lookupKey="Store.Wares",u.deletePermission="Store:Wares:Delete",u.insertPermission="Store:Wares:Modify",u.readPermission="Store:Wares:View",u.updatePermission="Store:Wares:Modify",u.Fields=(0,qe.fieldsProxy)();var Pr=o(c(),1),st;(e=>(e.baseUrl="Store/Wares",e.Methods={Create:"Store/Wares/Create",Update:"Store/Wares/Update",Delete:"Store/Wares/Delete",Retrieve:"Store/Wares/Retrieve",List:"Store/Wares/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(i,a,p){return(0,Pr.serviceRequest)(e.baseUrl+"/"+t,i,a,p)}})))(st||(st={}));var ie=class extends vt.EntityDialog{constructor(){super(...arguments);this.form=new j(this.idPrefix)}getFormKey(){return j.formKey}getIdProperty(){return v.idProperty}getLocalTextPrefix(){return v.localTextPrefix}getNameProperty(){return v.nameProperty}getService(){return Ke.baseUrl}getDeletePermission(){return v.deletePermission}getInsertPermission(){return v.insertPermission}getUpdatePermission(){return v.updatePermission}};r(ie,"CategoriesTypeDialog"),ie=m([vt.Decorators.registerClass("Store.Store.CategoriesTypeDialog")],ie);export{Ve as a,We as b,ie as c,f as d,Fe as e,Ge as f,v as g,Ke as h,$e as i,g as j,ze as k,je as l,Ye as m,T as n,kt as o,_e as p,x as q,et as r,tt as s,rt as t,U as u,Bt as v,ge as w,xe as x,b as y,zt as z,it as A,re as B,Pe as C,pt as D,oe as E,ct as F,h as G,ar as H,dt as I,ut as J,E as K,dr as L,mt as M,yt as N,O,mr as P,ft as Q,Le as R,u as S,st as T};
//# sourceMappingURL=chunk-URF5PXDV.js.map
