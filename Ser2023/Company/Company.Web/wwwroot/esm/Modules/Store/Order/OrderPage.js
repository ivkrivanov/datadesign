import{a as y}from"../../../_chunks/chunk-IUICKFWK.js";import{E as m,F as i,G as u,N as x,x as h,z as v}from"../../../_chunks/chunk-NQNNAIF5.js";import{a as n,c as a,d,f,g}from"../../../_chunks/chunk-FEDAVPE7.js";var S=a(f(),1);var r=a(g(),1),b=a(f(),1),p=a(v(),1);var c=a(g(),1);var C=a(v(),1);var o=class extends c.EntityDialog{constructor(){super(...arguments);this.form=new m(this.idPrefix)}getFormKey(){return m.formKey}getRowDefinition(){return i}getService(){return u.baseUrl}getToolbarButtons(){var e=super.getToolbarButtons();return e.push(C.ReportHelper.createToolButton({title:"Invoice",cssClass:"export-pdf-button",reportKey:"Northwind.OrderDetail",getParams:()=>({OrderID:this.entityId})})),e}updateInterface(){super.updateInterface(),this.toolbar.findButton("export-pdf-button").toggle(this.isEditMode())}};n(o,"OrderDialog"),o=d([c.Decorators.registerClass("Company.Store.OrderDialog")],o);var F=i.Fields,s=class extends r.EntityGrid{constructor(e){super(e)}getColumnsKey(){return h.columnsKey}getDialogType(){return o}getIdProperty(){return i.idProperty}getInsertPermission(){return i.insertPermission}getLocalTextPrefix(){return i.localTextPrefix}getRowDefinition(){return i}getService(){return u.baseUrl}getQuickFilters(){var e=super.getQuickFilters();return e.push({type:r.LookupEditor,options:{lookupKey:x.lookupKey},field:"ProductId",title:"Contains Product in Details",handler:t=>{this.view.params.ProductId=(0,b.toId)(t.value)},cssClass:"hidden-xs"}),e}createQuickFilters(){super.createQuickFilters(),this.shippingStateFilter=this.findQuickFilter(r.EnumEditor,F.ShippingState)}getButtons(){var e=super.getButtons();return e.push(p.ExcelExportHelper.createToolButton({grid:this,service:u.baseUrl+"/ListExcel",onViewSubmit:()=>this.onViewSubmit(),separator:!0})),e.push(p.PdfExportHelper.createToolButton({grid:this,onViewSubmit:()=>this.onViewSubmit()})),e.push({title:"Warehouse",cssClass:"export-xlsx-button",onClick:()=>{var t=new y;t.element.on("dialogclose",()=>{this.refresh(),t=null}),t.dialogOpen()}}),e}getColumns(){var e=super.getColumns();return e.splice(1,0,{id:"Print Invoice",field:null,name:"",cssClass:"align-center",format:t=>'<a class="inline-action print-invoice" title="invoice"><i class="fa fa-file-pdf-o text-red"></i></a>',width:24,minWidth:24,maxWidth:24}),e}onClick(e,t,I){if(super.onClick(e,t,I),!e.isDefaultPrevented()){var E=this.itemAt(t),l=$(e.target);l.parent().hasClass("inline-action")&&(l=l.parent()),l.hasClass("inline-action")&&(e.preventDefault(),l.hasClass("print-invoice")&&p.ReportHelper.execute({reportKey:"Store.ProductMovementDetails",params:{ProductMoveId:E.OrderId}}))}}set_shippingState(e){this.shippingStateFilter.value=e==null?"":e.toString()}addButtonClick(){var e=this.view.params.EqualityFilter;this.editItem({CounterpartyId:e?e.CounterpartyId:null})}};n(s,"OrderGrid"),s=d([r.Decorators.registerClass("Company.Store.OrderGrid"),r.Decorators.filterable()],s);function k(){(0,S.initFullHeightGridPage)(new s($("#GridDiv")).element)}n(k,"pageInit");export{k as default};
//# sourceMappingURL=OrderPage.js.map
