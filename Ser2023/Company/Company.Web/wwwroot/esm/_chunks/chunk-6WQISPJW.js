import{a as r,b as tr,c as s,d as x,e as m,f as d,g as y}from"./chunk-FEDAVPE7.js";var Ue=tr((rr,tt)=>{tt.exports=Serenity.Extensions});var Ee=class{};r(Ee,"CategoriesColumns"),Ee.columnsKey="Store.Categories";var we=s(y(),1);var ke=s(y(),1),rt=s(d(),1);var xe=class extends ke.PrefixedContext{constructor(p){if(super(p),!xe.init){xe.init=!0;var e=ke.ImageUploadEditor;(0,rt.initFormType)(xe,["FileName",e])}}},Oe=xe;r(Oe,"CategoriesExcelImportForm"),Oe.formKey="Store.CategoriesExcelImport";var F=s(y(),1),ot=s(d(),1);var Re=class extends F.PrefixedContext{constructor(p){if(super(p),!Re.init){Re.init=!0;var e=F.LookupEditor,t=F.StringEditor,o=F.ImageUploadEditor;(0,ot.initFormType)(Re,["CategoryTypeId",e,"CategoryCode",t,"CategoryName",t,"Description",t,"Picture",o])}}},Ne=Re;r(Ne,"CategoriesForm"),Ne.formKey="Store.Categories";var st=s(d(),1);var O=class{};r(O,"CategoriesLangRow"),O.idProperty="Id",O.nameProperty="CategoryName",O.localTextPrefix="Store.CategoriesLang",O.deletePermission="Store:General",O.insertPermission="Store:General",O.readPermission="Store:General",O.updatePermission="Store:General",O.Fields=(0,st.fieldsProxy)();var nt=s(d(),1),it;(e=>(e.baseUrl="Store/CategoriesLang",e.Methods={Create:"Store/CategoriesLang/Create",Update:"Store/CategoriesLang/Update",Delete:"Store/CategoriesLang/Delete",Retrieve:"Store/CategoriesLang/Retrieve",List:"Store/CategoriesLang/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(o,i,a){return(0,nt.serviceRequest)(e.baseUrl+"/"+t,o,i,a)}})))(it||(it={}));var oe=s(d(),1);var q=class{static getLookup(){return(0,oe.getLookup)("Store.Categories")}static getLookupAsync(){return m(this,null,function*(){return(0,oe.getLookupAsync)("Store.Categories")})}};r(q,"CategoriesRow"),q.idProperty="CategoryId",q.isActiveProperty="IsActive",q.nameProperty="CategoryName",q.localTextPrefix="Store.Categories",q.lookupKey="Store.Categories",q.deletePermission="Store:CategoriesType:Delete",q.insertPermission="Store:CategoriesType:Modify",q.readPermission="Store:CategoriesType:View",q.updatePermission="Store:CategoriesType:Modify",q.Fields=(0,oe.fieldsProxy)();var pt=s(d(),1),at;(e=>(e.baseUrl="Store/Categories",e.Methods={Create:"Store/Categories/Create",Update:"Store/Categories/Update",Delete:"Store/Categories/Delete",Retrieve:"Store/Categories/Retrieve",List:"Store/Categories/List",ExcelImport:"Store/Categories/ExcelImport"},["Create","Update","Delete","Retrieve","List","ExcelImport"].forEach(t=>{e[t]=function(o,i,a){return(0,pt.serviceRequest)(e.baseUrl+"/"+t,o,i,a)}})))(at||(at={}));var Qe=class{};r(Qe,"CategoriesTypeColumns"),Qe.columnsKey="Store.CategoriesType";var se=s(y(),1),dt=s(d(),1);var Pe=class extends se.PrefixedContext{constructor(p){if(super(p),!Pe.init){Pe.init=!0;var e=se.IntegerEditor,t=se.StringEditor;(0,dt.initFormType)(Pe,["Type",e,"CategoryType",t])}}},z=Pe;r(z,"CategoriesTypeForm"),z.formKey="Store.CategoriesType";var ie=s(d(),1);var S=class{static getLookup(){return(0,ie.getLookup)("Store.CategoriesType")}static getLookupAsync(){return m(this,null,function*(){return(0,ie.getLookupAsync)("Store.CategoriesType")})}};r(S,"CategoriesTypeRow"),S.idProperty="CategoryTypeId",S.isActiveProperty="IsActive",S.nameProperty="CategoryType",S.localTextPrefix="Store.CategoriesType",S.lookupKey="Store.CategoriesType",S.deletePermission="Store:CategoriesType:Delete",S.insertPermission="Store:CategoriesType:Modify",S.readPermission="Store:CategoriesType:View",S.updatePermission="Store:CategoriesType:Modify",S.Fields=(0,ie.fieldsProxy)();var ct=s(d(),1),Me;(e=>(e.baseUrl="Store/CategoriesType",e.Methods={Create:"Store/CategoriesType/Create",Update:"Store/CategoriesType/Update",Delete:"Store/CategoriesType/Delete",Retrieve:"Store/CategoriesType/Retrieve",List:"Store/CategoriesType/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(o,i,a){return(0,ct.serviceRequest)(e.baseUrl+"/"+t,o,i,a)}})))(Me||(Me={}));var ut=s(y(),1);var ne=class{format(p){var e=p.value;if(!e||!e.length)return"";var t=C.getLookup().itemById;let o;return e.map(i=>(o=t[i])?o.FullName:i).join(", ")}};r(ne,"EmployeeListFormatter"),ne=x([ut.Decorators.registerFormatter("Company.Store.EmployeeListFormatter")],ne);var He=class{};r(He,"CounterpartiesColumns"),He.columnsKey="Store.Counterparties";var E=s(y(),1);var j=s(y(),1),u=s(d(),1);var R=class extends j.StringEditor{constructor(e){super(e);this.addValidationRule(this.uniqueName,t=>{var o=(0,u.trimToNull)(this.get_value());return o==null?null:R.validate(o,this.multiple)}),e.bind("change",t=>{j.WX.hasOriginalEvent(t)&&this.formatValue()}),e.bind("blur",t=>{this.element.hasClass("valid")&&this.formatValue()})}formatValue(){this.element.val(this.getFormattedValue())}getFormattedValue(){var e=this.element.val();return this.multiple?R.formatMulti(e,R.formatPhone):R.formatPhone(e)}get_value(){return this.getFormattedValue()}set_value(e){this.element.val(e)}static validate(e,t){var o=t?R.isValidMulti(e,R.isValidPhone):R.isValidPhone(e);return o?null:(0,u.localText)(t?"Validation.StorePhoneMultiple":"Validation.StorePhone")}static isValidPhone(e){if((0,u.isEmptyOrNull)(e)||(e=(0,u.replaceAll)((0,u.replaceAll)(e," ",""),"-",""),e.length<10)||((0,u.startsWith)(e,"0")&&(e=e.substring(1)),(0,u.startsWith)(e,"(")&&e.charAt(4)===")"&&(e=e.substr(1,3)+e.substring(5)),e.length!==12)||(0,u.startsWith)(e,"0"))return!1;for(var t=0;t<e.length;t++){var o=e.charAt(t);if(o<"0"||o>"9")return!1}return!0}static formatPhone(e){return R.isValidPhone(e)&&(e=(0,u.replaceAll)((0,u.replaceAll)((0,u.replaceAll)((0,u.replaceAll)(e," ",""),"-",""),"(",""),")",""),(0,u.startsWith)(e,"0")&&(e=e.substring(1)),e="("+e.substr(0,3)+") "+e.substr(3,3)+"-"+e.substr(6,2)+e.substr(8,2)+e.substr(10,2)),e}static formatMulti(e,t){var o=(0,u.replaceAll)(e,String.fromCharCode(59),String.fromCharCode(44)).split(String.fromCharCode(44)),i="";for(var a of o){var l=(0,u.trimToNull)(a);l!=null&&(i.length>0&&(i+=", "),i+=t(l))}return i}static isValidMulti(e,t){if((0,u.isEmptyOrNull)(e))return!1;for(var o=(0,u.replaceAll)(e,String.fromCharCode(59),String.fromCharCode(44)).split(String.fromCharCode(44)),i=!1,a=0;a<o.length;a++){var l=o[a],A=(0,u.trimToNull)(l);if(A!=null){if(!t(A))return!1;i=!0}}return!!i}};r(R,"PhoneEditor"),x([j.Decorators.option()],R.prototype,"multiple",2),R=x([j.Decorators.registerEditor("Company.PhoneEditor")],R);var k=s(y(),1),I=s(d(),1);var ae=s(y(),1),et=s(d(),1);var G=class extends ae.TemplatedDialog{constructor(){super();this.textEditor=new ae.HtmlNoteContentEditor(this.byId("Text"))}getTemplate(){return"<form id='~_Form' class='s-Form'><textarea id='~_Text' class='required'></textarea></form>"}getDialogButtons(){return[{text:(0,et.localText)("Dialogs.OkButton"),click:()=>{this.validateForm()&&this.okClick&&this.okClick()}},{text:(0,et.localText)("Dialogs.CancelButton"),click:()=>this.dialogClose()}]}get text(){return this.textEditor.value}set text(e){this.textEditor.value=e}};r(G,"NotesDialog"),G=x([ae.Decorators.registerClass("Company.Store.NotesDialog")],G);var Y=class extends k.TemplatedWidget{constructor(e){super(e);new k.Toolbar(this.byId("Toolbar"),{buttons:[{title:"Add Note",cssClass:"add-button",onClick:t=>{t.preventDefault(),this.addClick()}}]})}getTemplate(){return"<div><div id='~_Toolbar'></div><ul id='~_NoteList'></ul></div>"}updateContent(){var e=this.byId("NoteList");if(e.children().remove(),this.items)for(var t=0,o=0;o<this.items.length;o++){var i=this.items[o],a=$("<li/>");$("<div/>").addClass("note-text").html((0,I.coalesce)(i.Text,"")).appendTo(a),$("<a/>").attr("href","#").addClass("note-date").text(i.InsertUserDisplayName+" - "+(0,I.formatDate)(i.InsertDate,"g")).data("index",t).appendTo(a).click(l=>this.editClick(l)),$("<a/>").attr("href","#").addClass("note-delete").attr("title","delete note").data("index",t).appendTo(a).click(l=>this.deleteClick(l)),a.appendTo(e),t++}}addClick(){var e=new G;e.dialogTitle="Add Note",e.okClick=()=>{var t=(0,I.trimToNull)(e.text);t!=null&&(this.items=this.items||[],(0,I.insert)(this.items,0,{Text:t,InsertUserDisplayName:I.Authorization.userDefinition.DisplayName,InsertDate:(0,I.formatISODateTimeUTC)(new Date)}),this.updateContent(),e.dialogClose(),this.set_isDirty(!0),this.onChange&&this.onChange())},e.dialogOpen()}editClick(e){e.preventDefault();var t=$(e.target).data("index"),o=this.items[t],i=new G;i.dialogTitle="Edit Note",i.text=o.Text,i.okClick=()=>{var a=(0,I.trimToNull)(i.text);a&&(this.items[t].Text=a,this.updateContent(),i.dialogClose(),this.set_isDirty(!0),this.onChange&&this.onChange())},i.dialogOpen()}deleteClick(e){e.preventDefault();var t=$(e.target).data("index");(0,I.confirmDialog)("Delete this note?",()=>{this.items.splice(t,1),this.updateContent(),this.set_isDirty(!0),this.onChange&&this.onChange()})}get value(){return this.items}set value(e){this.items=e||[],this.set_isDirty(!1),this.updateContent()}getEditValue(e,t){t[e.name]=this.value}setEditValue(e,t){this.value=e[t.name]||[]}get_isDirty(){return this.isDirty}set_isDirty(e){this.isDirty=e}};r(Y,"NotesEditor"),Y=x([k.Decorators.registerEditor("Company.Store.NotesEditor",[k.IGetEditValue,k.ISetEditValue]),k.Decorators.element("<div/>")],Y);var lt=s(d(),1);var Ce=class extends E.PrefixedContext{constructor(p){if(super(p),!Ce.init){Ce.init=!0;var e=E.StringEditor,t=E.LookupEditor,o=R,i=Y,a=E.DateEditor,l=E.EmailEditor,A=E.BooleanEditor;(0,lt.initFormType)(Ce,["CounterpartyId",e,"CompanyName",e,"ContactName",e,"ContactTitle",e,"Representatives",t,"Address",e,"Country",t,"City",t,"Region",e,"PostalCode",e,"Phone",o,"NotesList",i,"LastContactDate",a,"LastContactedBy",t,"Email",l,"SendBulletin",A])}}},Z=Ce;r(Z,"CounterpartiesForm"),Z.formKey="Store.Counterparties";var pe=s(d(),1);var f=class{static getLookup(){return(0,pe.getLookup)("Store.Counterparties")}static getLookupAsync(){return m(this,null,function*(){return(0,pe.getLookupAsync)("Store.Counterparties")})}};r(f,"CounterpartiesRow"),f.idProperty="Id",f.isActiveProperty="IsActive",f.nameProperty="CounterpartyId",f.localTextPrefix="Store.Counterparties",f.lookupKey="Store.Counterparties",f.deletePermission="Store:Counterparties:Delete",f.insertPermission="Store:Counterparties:Modify",f.readPermission="Store:Counterparties:View",f.updatePermission="Store:Counterparties:Modify",f.Fields=(0,pe.fieldsProxy)();var mt=s(d(),1),Ae;(e=>(e.baseUrl="Store/Counterparties",e.Methods={Create:"Store/Counterparties/Create",Update:"Store/Counterparties/Update",Delete:"Store/Counterparties/Delete",Retrieve:"Store/Counterparties/Retrieve",List:"Store/Counterparties/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(o,i,a){return(0,mt.serviceRequest)(e.baseUrl+"/"+t,o,i,a)}})))(Ae||(Ae={}));var yt=s(d(),1);var N=class{};r(N,"CounterpartyDetailsRow"),N.idProperty="Id",N.nameProperty="Email",N.localTextPrefix="Store.CounterpartyDetails",N.deletePermission="Store:Counterparties:Delete",N.insertPermission="Store:Counterparties:Modify",N.readPermission="Store:Counterparties:View",N.updatePermission="Store:Counterparties:Modify",N.Fields=(0,yt.fieldsProxy)();var St=s(d(),1);var J=class{};r(J,"CounterpartyRepresentativesRow"),J.idProperty="RepresentativeId",J.localTextPrefix="Store.CounterpartyRepresentatives",J.deletePermission="Store:Counterparties:Delete",J.insertPermission="Store:Counterparties:Modify",J.readPermission="Store:Counterparties:View",J.updatePermission="Store:Counterparties:Modify",J.Fields=(0,St.fieldsProxy)();var de=s(d(),1);var C=class{static getLookup(){return(0,de.getLookup)("Store.Employees")}static getLookupAsync(){return m(this,null,function*(){return(0,de.getLookupAsync)("Store.Employees")})}};r(C,"EmployeesRow"),C.idProperty="EmployeeId",C.isActiveProperty="IsActive",C.nameProperty="LastName",C.localTextPrefix="Store.Employees",C.lookupKey="Store.Employees",C.deletePermission="Store:General",C.insertPermission="Store:General",C.readPermission="Store:General",C.updatePermission="Store:General",C.Fields=(0,de.fieldsProxy)();var ft=s(y(),1),vt=(e=>(e[e.Male=1]="Male",e[e.Female=2]="Female",e))(vt||{});ft.Decorators.registerEnumType(vt,"Company.Store.Gender");var Je=class{};r(Je,"MeasuresColumns"),Je.columnsKey="Store.Measures";var Xe=s(y(),1),gt=s(d(),1);var Ie=class extends Xe.PrefixedContext{constructor(p){if(super(p),!Ie.init){Ie.init=!0;var e=Xe.StringEditor;(0,gt.initFormType)(Ie,["MeasureName",e])}}},_=Ie;r(_,"MeasuresForm"),_.formKey="Store.Measures";var ce=s(d(),1);var v=class{static getLookup(){return(0,ce.getLookup)("Store.Measures")}static getLookupAsync(){return m(this,null,function*(){return(0,ce.getLookupAsync)("Store.Measures")})}};r(v,"MeasuresRow"),v.idProperty="MeasureId",v.isActiveProperty="IsActive",v.nameProperty="MeasureName",v.localTextPrefix="Store.Measures",v.lookupKey="Store.Measures",v.deletePermission="Store:Measures:Delete",v.insertPermission="Store:Measures:Modify",v.readPermission="Store:Measures:View",v.updatePermission="Store:Measures:Modify",v.Fields=(0,ce.fieldsProxy)();var xt=s(d(),1),Ve;(e=>(e.baseUrl="Store/Measures",e.Methods={Create:"Store/Measures/Create",Update:"Store/Measures/Update",Delete:"Store/Measures/Delete",Retrieve:"Store/Measures/Retrieve",List:"Store/Measures/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(o,i,a){return(0,xt.serviceRequest)(e.baseUrl+"/"+t,o,i,a)}})))(Ve||(Ve={}));var Rt=s(d(),1);var Q=class{};r(Q,"NotesRow"),Q.idProperty="NoteId",Q.nameProperty="EntityType",Q.localTextPrefix="Store.Notes",Q.deletePermission="Store:General",Q.insertPermission="Store:General",Q.readPermission="Store:General",Q.updatePermission="Store:General",Q.Fields=(0,Rt.fieldsProxy)();var Ct=s(d(),1),Pt;(e=>(e.baseUrl="Store/Notes",e.Methods={Create:"Store/Notes/Create",Update:"Store/Notes/Update",Delete:"Store/Notes/Delete",Retrieve:"Store/Notes/Retrieve",List:"Store/Notes/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(o,i,a){return(0,Ct.serviceRequest)(e.baseUrl+"/"+t,o,i,a)}})))(Pt||(Pt={}));var We=class{};r(We,"OperationTypeColumns"),We.columnsKey="Store.OperationType";var ue=s(y(),1),It=s(d(),1);var De=class extends ue.PrefixedContext{constructor(p){if(super(p),!De.init){De.init=!0;var e=ue.IntegerEditor,t=ue.StringEditor;(0,It.initFormType)(De,["OpCode",e,"Operation",t])}}},Be=De;r(Be,"OperationTypeForm"),Be.formKey="Store.OperationType";var le=s(d(),1);var T=class{static getLookup(){return(0,le.getLookup)("Store.OperationType")}static getLookupAsync(){return m(this,null,function*(){return(0,le.getLookupAsync)("Store.OperationType")})}};r(T,"OperationTypeRow"),T.idProperty="OperationTypeId",T.isActiveProperty="IsActive",T.nameProperty="Operation",T.localTextPrefix="Store.OperationType",T.lookupKey="Store.OperationType",T.deletePermission="Store:OperationType:Delete",T.insertPermission="Store:OperationType:Modify",T.readPermission="Store:OperationType:View",T.updatePermission="Store:OperationType:Modify",T.Fields=(0,le.fieldsProxy)();var bt=s(d(),1),Dt;(e=>(e.baseUrl="Store/OperationType",e.Methods={Create:"Store/OperationType/Create",Update:"Store/OperationType/Update",Delete:"Store/OperationType/Delete",Retrieve:"Store/OperationType/Retrieve",List:"Store/OperationType/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(o,i,a){return(0,bt.serviceRequest)(e.baseUrl+"/"+t,o,i,a)}})))(Dt||(Dt={}));var Lt;(g=>{g.General="Store:General";let p;(c=>(c.Delete="Store:Categories:Delete",c.Modify="Store:Categories:Modify",c.View="Store:Categories:View"))(p=g.Categories||(g.Categories={}));let e;(c=>(c.Delete="Store:CategoriesType:Delete",c.Modify="Store:CategoriesType:Modify",c.View="Store:CategoriesType:View"))(e=g.CategoriesType||(g.CategoriesType={}));let t;(c=>(c.Delete="Store:Shops:Delete",c.Modify="Store:Shops:Modify",c.View="Store:Shops:View"))(t=g.Shops||(g.Shops={}));let o;(c=>(c.Delete="Store:DocumentType:Delete",c.Modify="Store:DocumentType:Modify",c.View="Store:DocumentType:View"))(o=g.DocumentType||(g.DocumentType={}));let i;(c=>(c.Delete="Store:Measures:Delete",c.Modify="Store:Measures:Modify",c.View="Store:Measures:View"))(i=g.Measures||(g.Measures={}));let a;(c=>(c.Delete="Store:OperationType:Delete",c.Modify="Store:OperationType:Modify",c.View="Store:OperationType:View"))(a=g.OperationType||(g.OperationType={}));let l;(c=>(c.Delete="Store:Counterparties:Delete",c.Modify="Store:Counterparties:Modify",c.View="Store:Counterparties:View"))(l=g.Counterparties||(g.Counterparties={}));let A;(c=>(c.Delete="Store:Wares:Delete",c.Modify="Store:Wares:Modify",c.View="Store:Wares:View"))(A=g.Wares||(g.Wares={}));let er;(c=>(c.Delete="Store:Product:Delete",c.Modify="Store:Product:Modify",c.View="Store:Product:View"))(er=g.Product||(g.Product={}))})(Lt||(Lt={}));var me=class{};r(me,"ProductDetailsColumns"),me.columnsKey="Store.ProductDetails";var K=s(y(),1),qt=s(d(),1);var be=class extends K.PrefixedContext{constructor(p){if(super(p),!be.init){be.init=!0;var e=K.LookupEditor,t=K.StringEditor,o=K.DecimalEditor;(0,qt.initFormType)(be,["WaresId",e,"WaresName",t,"Quantity",o,"ProductQuantity",o,"PlanPrice",o,"Discount",o])}}},w=be;r(w,"ProductDetailsForm"),w.formKey="Store.ProductDetails";var Tt=s(d(),1);var D=class{};r(D,"ProductDetailsRow"),D.idProperty="DetailId",D.isActiveProperty="IsActive",D.localTextPrefix="Store.ProductDetails",D.deletePermission="Store:Product:Delete",D.insertPermission="Store:Product:View",D.readPermission="Store:Product:View",D.updatePermission="Store:Product:View",D.Fields=(0,Tt.fieldsProxy)();var Ut=s(d(),1),ht;(e=>(e.baseUrl="Store/ProductDetails",e.Methods={Retrieve:"Store/ProductDetails/Retrieve",List:"Store/ProductDetails/List"},["Retrieve","List"].forEach(t=>{e[t]=function(o,i,a){return(0,Ut.serviceRequest)(e.baseUrl+"/"+t,o,i,a)}})))(ht||(ht={}));var Et=s(d(),1);var M=class{};r(M,"ProductLangRow"),M.idProperty="Id",M.nameProperty="ProductName",M.localTextPrefix="Store.ProductLang",M.deletePermission="Store:General",M.insertPermission="Store:General",M.readPermission="Store:General",M.updatePermission="Store:General",M.Fields=(0,Et.fieldsProxy)();var kt=s(d(),1),Ot;(e=>(e.baseUrl="Store/ProductLang",e.Methods={Create:"Store/ProductLang/Create",Update:"Store/ProductLang/Update",Delete:"Store/ProductLang/Delete",Retrieve:"Store/ProductLang/Retrieve",List:"Store/ProductLang/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(o,i,a){return(0,kt.serviceRequest)(e.baseUrl+"/"+t,o,i,a)}})))(Ot||(Ot={}));var Fe=class{};r(Fe,"ProductsColumns"),Fe.columnsKey="Store.Products";var b=s(y(),1);var Ge=s(y(),1);var ye=class extends Ge.EntityDialog{constructor(){super(...arguments);this.form=new _(this.idPrefix)}getFormKey(){return _.formKey}getIdProperty(){return v.idProperty}getLocalTextPrefix(){return v.localTextPrefix}getNameProperty(){return v.nameProperty}getService(){return Ve.baseUrl}getDeletePermission(){return v.deletePermission}getInsertPermission(){return v.insertPermission}getUpdatePermission(){return v.updatePermission}};r(ye,"MeasuresDialog"),ye=x([Ge.Decorators.registerClass("Company.Store.MeasuresDialog")],ye);var Ht=s(y(),1),Ke=s(d(),1),At=s(Ue(),1);var Nt=s(y(),1),Qt=s(d(),1),Mt=s(Ue(),1);var ee=class extends Mt.GridEditorDialog{constructor(){super();this.form=new w(this.idPrefix),this.form.WaresId.changeSelect2(e=>m(this,null,function*(){var t=(0,Qt.toId)(this.form.WaresId.value);t!=null&&(this.form.PlanPrice.value=(yield P.getLookupAsync()).itemById[t].UnitPrice)})),this.form.Discount.addValidationRule(this.uniqueName,e=>{var t=this.form.PlanPrice.value,o=this.form.Quantity.value,i=this.form.ProductQuantity.value,a=this.form.Discount.value;if(t!=null&&o!=null&&i!=null&&a!=null&&a>0&&a>=t*o/i)return"Discount can't be higher than total price!"})}getFormKey(){return w.formKey}getLocalTextPrefix(){return D.localTextPrefix}updateInterface(){super.updateInterface()}};r(ee,"ProductDetailsDialog"),ee=x([Nt.Decorators.registerClass()],ee);var te=class extends At.GridEditorBase{getColumnsKey(){return me.columnsKey}getDialogType(){return ee}getLocalTextPrefix(){return D.localTextPrefix}validateEntity(p,e){p.WaresId=(0,Ke.toId)(p.WaresId);var t=this.view.getItems().find(o=>o.WaresId===p.WaresId);return t&&this.id(t)!==e?((0,Ke.alertDialog)("This wares is already in order details!"),!1):(e!=null||(e=p[this.getIdProperty()]),P.getLookupAsync().then(o=>{var a,l;var i=(l=(a=this.view)==null?void 0:a.getItemById)==null?void 0:l.call(a,e);i&&(i.WaresName=o.itemById[p.WaresId].WaresName,this.view.updateItem(e,i))}),p.LineTotal=(p.Quantity||0)*(p.UnitPrice||0)-(p.Discount||0),!0)}};r(te,"ProductDetailsEditor"),te=x([Ht.Decorators.registerEditor("Company.Store.ProductDetailsEditor")],te);var Jt=s(d(),1);var Le=class extends b.PrefixedContext{constructor(p){if(super(p),!Le.init){Le.init=!0;var e=b.LookupEditor,t=b.StringEditor,o=b.ImageUploadEditor,i=b.BooleanEditor,a=b.DecimalEditor,l=te,A=b.IntegerEditor;(0,Jt.initFormType)(Le,["CategoryId",e,"ProductName",t,"ProductCode",t,"ProductBarcode",t,"ProductLabel",t,"MeasureId",e,"ProductImage",o,"Discontinued",i,"UnitPrice",a,"QuantityPerUnit",t,"DetailList",l,"UnitsInStock",A,"UnitsOnOrder",A,"ReorderLevel",A])}}},$e=Le;r($e,"ProductsForm"),$e.formKey="Store.Products";var Xt=s(d(),1);var X=class{};r(X,"ProductsLogRow"),X.idProperty="ProductLogId",X.localTextPrefix="Store.ProductsLog",X.deletePermission=null,X.insertPermission=null,X.readPermission="",X.updatePermission=null,X.Fields=(0,Xt.fieldsProxy)();var Se=s(d(),1);var h=class{static getLookup(){return(0,Se.getLookup)("Store.Product")}static getLookupAsync(){return m(this,null,function*(){return(0,Se.getLookupAsync)("Store.Product")})}};r(h,"ProductsRow"),h.idProperty="ProductId",h.isActiveProperty="IsActive",h.nameProperty="ProductName",h.localTextPrefix="Store.Products",h.lookupKey="Store.Product",h.deletePermission="Store:Product:Delete",h.insertPermission="Store:Product:Modify",h.readPermission="Store:Product:View",h.updatePermission="Store:Product:Modify",h.Fields=(0,Se.fieldsProxy)();var Wt=s(d(),1),Vt;(e=>(e.baseUrl="Store/Products",e.Methods={Create:"Store/Products/Create",Update:"Store/Products/Update",Delete:"Store/Products/Delete",Retrieve:"Store/Products/Retrieve",List:"Store/Products/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(o,i,a){return(0,Wt.serviceRequest)(e.baseUrl+"/"+t,o,i,a)}})))(Vt||(Vt={}));var je=s(y(),1),Bt=s(d(),1);var qe=class extends je.PrefixedContext{constructor(p){if(super(p),!qe.init){qe.init=!0;var e=je.StringEditor;(0,Bt.initFormType)(qe,["ShopId",e,"ShopName",e,"ContactName",e,"ContactTitle",e,"Address",e,"City",e,"Region",e,"PostalCode",e,"Country",e,"Phone",e])}}},ze=qe;r(ze,"ShopsForm"),ze.formKey="Store.Shops";var Ye=class{};r(Ye,"ShopsColumns"),Ye.columnsKey="Store.Shops";var fe=s(d(),1);var U=class{static getLookup(){return(0,fe.getLookup)("Store.Shops")}static getLookupAsync(){return m(this,null,function*(){return(0,fe.getLookupAsync)("Store.Shops")})}};r(U,"ShopsRow"),U.idProperty="Id",U.isActiveProperty="IsActive",U.nameProperty="ShopId",U.localTextPrefix="Store.Shops",U.lookupKey="Store.Shops",U.deletePermission="Store:Shops:Delete",U.insertPermission="Store:Shops:Modify",U.readPermission="Store:Shops:View",U.updatePermission="Store:Shops:Modify",U.Fields=(0,fe.fieldsProxy)();var Gt=s(d(),1),Ft;(e=>(e.baseUrl="Store/Shops",e.Methods={Create:"Store/Shops/Create",Update:"Store/Shops/Update",Delete:"Store/Shops/Delete",Retrieve:"Store/Shops/Retrieve",List:"Store/Shops/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(o,i,a){return(0,Gt.serviceRequest)(e.baseUrl+"/"+t,o,i,a)}})))(Ft||(Ft={}));var Ze=class{};r(Ze,"WaresColumns"),Ze.columnsKey="Store.Wares";var L=s(y(),1);var Te=s(y(),1),Kt=s(d(),1),$t=s(Ue(),1);var ve=class extends Te.EntityDialog{constructor(){super();this.form=new Z(this.idPrefix);this.byId("NotesList").closest(".field").hide().end().appendTo(this.byId("TabNotes")),$t.DialogUtils.pendingChangesConfirmation(this.element,()=>this.getSaveState()!=this.loadedState)}getFormKey(){return Z.formKey}getIdProperty(){return f.idProperty}getLocalTextPrefix(){return f.localTextPrefix}getNameProperty(){return f.nameProperty}getService(){return Ae.baseUrl}getDeletePermission(){return f.deletePermission}getInsertPermission(){return f.insertPermission}getUpdatePermission(){return f.updatePermission}getSaveState(){try{return $.toJSON(this.getSaveEntity())}catch(e){return null}}loadResponse(e){super.loadResponse(e),this.loadedState=this.getSaveState()}loadEntity(e){super.loadEntity(e)}onSaveSuccess(e){super.onSaveSuccess(e),(0,Kt.reloadLookup)("Store.Counterparties")}getTemplate(){return`<div id="~_Tabs" class="s-DialogContent">
            <ul>
                <li><a href="#~_TabInfo"><span>{{text:"Db.Store.Counterparties.EntitySingular"}}</span></a></li>
                <li><a href="#~_TabNotes"><span>{{text:"Db.Store.Notes.EntityPlural"}}</span></a></li>
            </ul>
            <div id="~_TabInfo" class="tab-pane s-TabInfo">
                <div id="~_Toolbar" class="s-DialogToolbar"></div>
                <div class="s-Form">
                    <form id="~_Form" action="">
                        <div class="fieldset ui-widget ui-widget-content ui-corner-all">
                            <div id="~_PropertyGrid"></div>
                            <div class="clear"></div>
                        </div>
                    </form>
                </div>
            </div>
            <div id="~_TabNotes" class="tab-pane s-TabNotes"></div>
        </div>`}};r(ve,"CounterpartiesDialog"),ve=x([Te.Decorators.registerClass("Company.Store.CounterpartiesDialog"),Te.Decorators.panel()],ve);var zt=s(d(),1);var he=class extends L.PrefixedContext{constructor(p){if(super(p),!he.init){he.init=!0;var e=L.LookupEditor,t=L.StringEditor,o=L.IntegerEditor,i=L.ImageUploadEditor,a=L.BooleanEditor,l=L.DecimalEditor;(0,zt.initFormType)(he,["CategoryId",e,"WaresCode",t,"WaresBarcode",t,"WaresLabel",t,"WaresName",t,"MeasureId",o,"WaresImage",i,"Discontinued",a,"CounterpartyId",e,"QuantityPerUnit",l,"UnitPrice",l,"AccountId",o])}}},_e=he;r(_e,"WaresForm"),_e.formKey="Store.Wares";var jt=s(d(),1);var H=class{};r(H,"WaresLangRow"),H.idProperty="Id",H.nameProperty="WaresName",H.localTextPrefix="Store.WaresLang",H.deletePermission="Store:General",H.insertPermission="Store:General",H.readPermission="Store:General",H.updatePermission="Store:General",H.Fields=(0,jt.fieldsProxy)();var Zt=s(d(),1),Yt;(e=>(e.baseUrl="Store/WaresLang",e.Methods={Create:"Store/WaresLang/Create",Update:"Store/WaresLang/Update",Delete:"Store/WaresLang/Delete",Retrieve:"Store/WaresLang/Retrieve",List:"Store/WaresLang/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(o,i,a){return(0,Zt.serviceRequest)(e.baseUrl+"/"+t,o,i,a)}})))(Yt||(Yt={}));var ge=s(d(),1);var P=class{static getLookup(){return(0,ge.getLookup)("Store.Wares")}static getLookupAsync(){return m(this,null,function*(){return(0,ge.getLookupAsync)("Store.Wares")})}};r(P,"WaresRow"),P.idProperty="WaresId",P.isActiveProperty="IsActive",P.nameProperty="WaresName",P.localTextPrefix="Store.Wares",P.lookupKey="Store.Wares",P.deletePermission="Store:Wares:Delete",P.insertPermission="Store:Wares:Modify",P.readPermission="Store:Wares:View",P.updatePermission="Store:Wares:Modify",P.Fields=(0,ge.fieldsProxy)();var wt=s(d(),1),_t;(e=>(e.baseUrl="Store/Wares",e.Methods={Create:"Store/Wares/Create",Update:"Store/Wares/Update",Delete:"Store/Wares/Delete",Retrieve:"Store/Wares/Retrieve",List:"Store/Wares/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(o,i,a){return(0,wt.serviceRequest)(e.baseUrl+"/"+t,o,i,a)}})))(_t||(_t={}));var re=class extends we.EntityDialog{constructor(){super(...arguments);this.form=new z(this.idPrefix)}getFormKey(){return z.formKey}getIdProperty(){return S.idProperty}getLocalTextPrefix(){return S.localTextPrefix}getNameProperty(){return S.nameProperty}getService(){return Me.baseUrl}getDeletePermission(){return S.deletePermission}getInsertPermission(){return S.insertPermission}getUpdatePermission(){return S.updatePermission}};r(re,"CategoriesTypeDialog"),re=x([we.Decorators.registerClass("Company.Store.CategoriesTypeDialog")],re);export{Ue as a,Ee as b,Oe as c,re as d,Ne as e,q as f,at as g,Qe as h,S as i,Me as j,He as k,f as l,Ae as m,Je as n,v as o,Ve as p,We as q,Be as r,T as s,Dt as t,me as u,D as v,ht as w,Fe as x,ye as y,ee as z,$e as A,h as B,Vt as C,ze as D,Ye as E,U as F,Ft as G,Ze as H,ve as I,_e as J,P as K,_t as L};
//# sourceMappingURL=chunk-6WQISPJW.js.map
